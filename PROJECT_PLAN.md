# FaceWatch 프로젝트 초기 기획안

## 1. 프로젝트 개요

### 1.1 프로젝트명
**FaceWatch** - 실시간 얼굴 식별·추적 시스템

### 1.2 프로젝트 목적
CCTV, 영상, 이미지, 웹캠 등 다양한 소스에서 특정 인물을 자동으로 식별하고 추적하는 AI 기반 얼굴 인식 시스템 구축

### 1.3 핵심 가치 제안
- **정확한 인식**: InsightFace 기반 고성능 얼굴 인식
- **다양한 환경 지원**: CCTV, 영상 파일, 이미지, 웹캠 실시간 처리
- **오탐 최소화**: 다층 필터링 및 검증 메커니즘
- **확장 가능한 갤러리**: Bank 방식으로 다양한 각도/조건의 얼굴 저장

---

## 2. 서비스 플로우

### 2.1 전체 시스템 플로우

```
┌─────────────────────────────────────────────────────────────┐
│                    FaceWatch 시스템 플로우                    │
└─────────────────────────────────────────────────────────────┘

[1단계: 인물 등록 (Enrollment)]
    images/enroll/{person_id}/
        ↓
    얼굴 감지 및 임베딩 추출
        ↓
    Bank & Centroid 생성
        ↓
    outputs/embeddings/{person_id}/
        ├─ bank.npy (N×512)
        └─ centroid.npy (512)

[2단계: 분석 대상 입력]
    Option A: 이미지 파일
        images/source/{filename}.jpg
    Option B: 영상 파일
        videos/source/{filename}.mp4
    Option C: 웹캠 실시간
        cv2.VideoCapture(0)

[3단계: 얼굴 감지 및 매칭]
    프레임/이미지 입력
        ↓
    얼굴 감지 (RetinaFace)
        ↓
    임베딩 추출 (InsightFace buffalo_l)
        ↓
    갤러리와 매칭 (Bank 기반)
        ↓
    오탐 방지 필터링
        ├─ bbox 기반 다중 매칭 필터링
        ├─ 프레임 간 연속성 체크
        ├─ sim_gap 체크
        └─ 화질 기반 임계값 조정
        ↓
    결과 분류
        ├─ 매칭됨 (is_match=True)
        ├─ 검토 대상 (review_reason)
        └─ 미매칭

[4단계: 결과 저장 및 출력]
    outputs/results/{filename}_{timestamp}/
        ├─ matches/          # 매칭된 스냅샷
        │   └─ review/      # 검토 대상
        ├─ logs/             # CSV 로그
        └─ frames/           # 프레임 이미지 (선택적)
```

### 2.2 상세 서비스 플로우

#### 2.2.1 인물 등록 플로우

```
[기본 등록 (MODE 1)]
images/enroll/{person_id}/*.jpg
    ↓
각 이미지에서 얼굴 감지
    ↓
임베딩 추출 (512차원)
    ↓
Bank 생성: (N, 512) 배열
    ↓
Centroid 계산: Bank의 평균값
    ↓
저장: outputs/embeddings/{person_id}/

[영상에서 자동 수집 (MODE 2)]
videos/source/{video}.mp4
    ↓
프레임별 얼굴 감지
    ↓
갤러리와 매칭하여 특정 인물 찾기
    ↓
각도 정보 추출 (정면/측면/프로필)
    ↓
중복 체크 (유사도 기반)
    ↓
Bank에 추가 (최대 N개)

[수동 추가 (MODE 3)]
images/extracted_frames/{person_id}/*.jpg
    ↓
각 이미지 임베딩 추출
    ↓
기존 Bank와 중복 체크
    ↓
새로운 얼굴만 Bank에 추가
```

#### 2.2.2 얼굴 인식 플로우

```
[이미지/영상 분석]
입력 파일 (이미지 또는 영상)
    ↓
프레임 단위 처리
    ↓
┌─────────────────────────────────────┐
│  각 프레임 처리                      │
├─────────────────────────────────────┤
│  1. 얼굴 감지 (RetinaFace)          │
│  2. 임베딩 추출 (buffalo_l)         │
│  3. 얼굴 각도 추정                   │
│  4. 화질 추정 (bbox 크기 기반)      │
│  5. 갤러리와 매칭                    │
│     - Bank: 모든 임베딩과 비교      │
│     - 최고 유사도 선택               │
│  6. 마스크 가능성 추정               │
│  7. 적응형 임계값 계산               │
│     - 기본값 + 화질 조정 + 마스크 조정│
│  8. 매칭 여부 판단                   │
│  9. 오탐 방지 필터링                 │
│     - bbox 기반 다중 매칭 체크       │
│     - sim_gap 체크                   │
│     - 프레임 간 연속성 체크          │
│ 10. 결과 분류 및 저장                │
└─────────────────────────────────────┘
    ↓
CSV 로그 기록
    ↓
매칭된 경우: 스냅샷 저장
검토 대상: review 폴더에 저장
    ↓
통계 출력
```

#### 2.2.3 웹캠 실시간 플로우

```
웹캠 초기화
    ↓
┌─────────────────────────────────────┐
│  실시간 루프                         │
├─────────────────────────────────────┤
│  while True:                         │
│    1. 프레임 읽기                    │
│    2. 프레임 스킵 (성능 최적화)      │
│    3. 얼굴 감지 및 매칭               │
│    4. 화면에 박스 및 라벨 표시        │
│       - 초록: 매칭됨                  │
│       - 빨강: 미매칭                  │
│    5. 매칭된 경우: 30프레임마다 저장 │
│    6. 'q' 키 입력 시 종료            │
└─────────────────────────────────────┘
    ↓
리소스 해제 및 통계 출력
```

---

## 3. 시스템 아키텍처

### 3.1 전체 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│                    FaceWatch 시스템                     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌──────────────┐    ┌──────────────┐                 │
│  │  입력 모듈   │    │  등록 모듈   │                 │
│  ├──────────────┤    ├──────────────┤                 │
│  │ - 이미지     │    │ - 기본 등록  │                 │
│  │ - 영상       │    │ - 영상 수집  │                 │
│  │ - 웹캠       │    │ - 수동 추가  │                 │
│  └──────┬───────┘    └──────┬───────┘                 │
│         │                   │                         │
│         └───────────┬─────────┘                        │
│                     │                                  │
│         ┌───────────▼───────────┐                      │
│         │   임베딩 저장소        │                      │
│         │  (Bank & Centroid)    │                      │
│         └───────────┬───────────┘                      │
│                     │                                  │
│         ┌───────────▼───────────┐                      │
│         │   얼굴 인식 엔진       │                      │
│         ├───────────────────────┤                      │
│         │ - 얼굴 감지           │                      │
│         │ - 임베딩 추출         │                      │
│         │ - 매칭 알고리즘       │                      │
│         │ - 오탐 방지 필터      │                      │
│         └───────────┬───────────┘                      │
│                     │                                  │
│         ┌───────────▼───────────┐                      │
│         │   결과 처리 모듈       │                      │
│         ├───────────────────────┤                      │
│         │ - CSV 로깅            │                      │
│         │ - 스냅샷 저장         │                      │
│         │ - 검토 대상 분리      │                      │
│         │ - 통계 생성           │                      │
│         └───────────────────────┘                      │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 3.2 핵심 모듈 구조

```
src/
├─ face_enroll.py          # 인물 등록 통합 스크립트
├─ face_match_cctv.py      # 이미지/영상 분석 스크립트
├─ face_match_webcam.py    # 웹캠 실시간 분석 스크립트
└─ utils/
   ├─ device_config.py     # GPU/CPU 설정
   ├─ gallery_loader.py    # 갤러리 로드 및 매칭
   ├─ mask_detector.py     # 마스크 감지 및 임계값 조정
   └─ face_angle_detector.py # 얼굴 각도 감지
```

---

## 4. 기술 스택 및 Trade-off 분석

### 4.1 핵심 기술 스택

#### 4.1.1 얼굴 인식 모델

**선택: InsightFace (buffalo_l)**

| 항목 | 선택 기술 | 대안 | 선택 이유 |
|------|----------|------|----------|
| **모델** | InsightFace buffalo_l | ArcFace, FaceNet, VGGFace | - SOTA 성능<br>- ONNX 지원으로 배포 용이<br>- 512차원 임베딩 (균형잡힌 차원)<br>- 다양한 각도/조건에서 강건함 |
| **임베딩 차원** | 512차원 | 128, 256, 1024 | - 성능과 메모리 균형<br>- 충분한 표현력<br>- 계산 효율성 |
| **정규화** | L2 Normalization | None, Min-Max | - Cosine similarity와 호환<br>- 벡터 크기 정규화로 안정적 비교 |

**Trade-off:**
- ✅ 장점: 높은 정확도, 다양한 환경에서 강건함
- ⚠️ 단점: 상대적으로 큰 모델 크기, GPU 메모리 필요

#### 4.1.2 얼굴 감지 (Detection)

**선택: RetinaFace (InsightFace 내장)**

| 항목 | 선택 기술 | 대안 | 선택 이유 |
|------|----------|------|----------|
| **Detector** | RetinaFace | MTCNN, YOLOv5-face, MediaPipe | - InsightFace와 통합<br>- 높은 정확도<br>- 다양한 크기 얼굴 감지 |
| **Detection Size** | (640, 640) | (320, 320), (1280, 1280) | - 정확도와 속도 균형<br>- 실시간 처리 가능 |

**Trade-off:**
- ✅ 장점: 정확한 감지, 다양한 각도 지원
- ⚠️ 단점: 작은 얼굴 감지 시 성능 저하 가능

#### 4.1.3 임베딩 저장 방식

**선택: Bank + Centroid 이중 구조**

| 방식 | 설명 | 장점 | 단점 |
|------|------|------|------|
| **Bank** | (N, 512) 배열 - 여러 임베딩 저장 | - 다양한 각도/조건 대응<br>- 최고 유사도 선택 가능 | - 메모리 사용량 증가<br>- 매칭 시간 증가 |
| **Centroid** | (512,) 벡터 - 평균값 | - 빠른 매칭<br>- 메모리 효율적 | - 평균화로 인한 정보 손실 |

**선택 이유:**
- Bank 우선 사용, 없으면 Centroid 사용
- 다양한 얼굴 각도/조건을 저장하여 정확도 향상
- 필요시 Centroid로 빠른 매칭 가능

**Trade-off:**
- ✅ Bank: 높은 정확도, 다양한 조건 대응
- ⚠️ Bank: 메모리 및 계산 비용 증가
- ✅ Centroid: 빠른 매칭, 메모리 효율적
- ⚠️ Centroid: 평균화로 인한 정보 손실

#### 4.1.4 매칭 알고리즘

**선택: Cosine Similarity (내적)**

| 항목 | 선택 기술 | 대안 | 선택 이유 |
|------|----------|------|----------|
| **유사도 측정** | Cosine Similarity | Euclidean Distance, Manhattan Distance | - L2 정규화된 벡터와 호환<br>- 각도 기반 비교 (크기 무관)<br>- 계산 효율적 (내적 연산) |
| **임계값** | 0.32 (기본) | 0.25~0.40 | - 실험 기반 최적값<br>- 오탐과 미탐의 균형 |

**Trade-off:**
- ✅ 장점: 직관적, 계산 효율적
- ⚠️ 단점: 고정 임계값의 한계 (→ 적응형 임계값으로 해결)

#### 4.1.5 적응형 임계값 시스템

**구현: 다중 요소 기반 동적 조정**

| 요소 | 영향 | 조정 범위 |
|------|------|----------|
| **기본 임계값** | 0.32 | 고정 |
| **화질** | ±0.04~0.08 | High: +0.04, Low: -0.03 |
| **마스크** | -0.02~-0.05 | 가능성에 따라 조정 |
| **최종 범위** | 0.28~0.40 | 동적 계산 |

**Trade-off:**
- ✅ 장점: 다양한 환경에 적응, 정확도 향상
- ⚠️ 단점: 복잡도 증가, 튜닝 필요

### 4.2 인프라 및 런타임

#### 4.2.1 실행 환경

| 항목 | 선택 기술 | 대안 | 선택 이유 |
|------|----------|------|----------|
| **언어** | Python 3.9+ | C++, Java, Go | - 빠른 프로토타이핑<br>- 풍부한 라이브러리<br>- InsightFace Python 지원 |
| **런타임** | ONNX Runtime | TensorFlow, PyTorch | - 모델 배포 최적화<br>- GPU/CPU 자동 전환<br>- 추론 속도 향상 |
| **GPU 지원** | CUDA (선택적) | CPU only | - 실시간 처리 가능<br>- 배치 처리 속도 향상 |

**Trade-off:**
- ✅ Python: 개발 속도, 생태계
- ⚠️ Python: 실행 속도 (C++ 대비 느림)
- ✅ GPU: 빠른 처리
- ⚠️ GPU: 하드웨어 요구사항

#### 4.2.2 데이터 처리

| 항목 | 선택 기술 | 대안 | 선택 이유 |
|------|----------|------|----------|
| **이미지 처리** | OpenCV | PIL, scikit-image | - 성능 우수<br>- 영상 처리 특화<br>- 다양한 포맷 지원 |
| **배열 연산** | NumPy | PyTorch Tensor, CuPy | - 표준 라이브러리<br>- 효율적인 벡터 연산<br>- 메모리 효율적 |
| **영상 처리** | OpenCV + imageio | FFmpeg-python | - 통합된 인터페이스<br>- GIF 지원 |

**Trade-off:**
- ✅ OpenCV: 성능, 다양한 기능
- ⚠️ OpenCV: 학습 곡선, 의존성 관리

### 4.3 오탐 방지 전략

#### 4.3.1 다층 필터링 시스템

| 레벨 | 방법 | 목적 | Trade-off |
|------|------|------|-----------|
| **1단계** | sim_gap 체크 | 최고/두 번째 유사도 차이 확인 | ✅ 오탐 감소 / ⚠️ 엄격할수록 미탐 증가 |
| **2단계** | bbox 기반 필터링 | 같은 얼굴 영역 다중 매칭 제거 | ✅ 정확도 향상 / ⚠️ 계산 비용 증가 |
| **3단계** | 연속성 체크 | 프레임 간 일관성 확인 | ✅ 일시적 오탐 제거 / ⚠️ 지연 발생 |
| **4단계** | 화질 기반 임계값 | 화질에 따른 동적 조정 | ✅ 환경 적응 / ⚠️ 복잡도 증가 |

**전체 Trade-off:**
- ✅ 장점: 높은 정확도, 오탐 최소화
- ⚠️ 단점: 복잡도 증가, 처리 시간 증가, 파라미터 튜닝 필요

---

## 5. 데이터 플로우

### 5.1 등록 데이터 플로우

```
이미지/영상 입력
    ↓
얼굴 감지 (RetinaFace)
    ↓
임베딩 추출 (buffalo_l)
    ↓
L2 정규화
    ↓
┌─────────────────┐
│  저장 방식 선택  │
├─────────────────┤
│  Bank: (N, 512) │  ← 여러 얼굴 저장
│  Centroid: (512)│  ← 평균값 저장
└─────────────────┘
    ↓
outputs/embeddings/{person_id}/
```

### 5.2 인식 데이터 플로우

```
입력 프레임/이미지
    ↓
얼굴 감지
    ↓
임베딩 추출
    ↓
┌─────────────────────────────┐
│  갤러리 매칭                 │
├─────────────────────────────┤
│  Bank 방식:                  │
│    - 모든 임베딩과 비교       │
│    - 최고 유사도 선택         │
│  Centroid 방식:              │
│    - 단일 벡터와 비교         │
└─────────────────────────────┘
    ↓
적응형 임계값 계산
    ├─ 기본값 (0.32)
    ├─ 화질 조정 (±0.04~0.08)
    └─ 마스크 조정 (-0.02~-0.05)
    ↓
매칭 여부 판단
    ↓
오탐 방지 필터링
    ↓
결과 저장 (CSV, 이미지)
```

---

## 6. 성능 고려사항

### 6.1 처리 속도

| 항목 | 최적화 방법 | Trade-off |
|------|------------|-----------|
| **프레임 스킵** | 2프레임마다 처리 (웹캠) | ✅ 속도 향상 / ⚠️ 일부 프레임 누락 |
| **Detection Size** | (640, 640) | ✅ 속도와 정확도 균형 |
| **GPU 활용** | CUDA 지원 | ✅ 빠른 처리 / ⚠️ 하드웨어 필요 |
| **Bank 크기** | 제한 없음 (실제로는 N개) | ✅ 정확도 / ⚠️ 메모리 및 계산 비용 |

### 6.2 메모리 사용

| 항목 | 크기 | 최적화 |
|------|------|--------|
| **임베딩 (Bank)** | N × 512 × 4 bytes | N개 제한 (실제로는 10~20개) |
| **모델 (buffalo_l)** | ~500MB | GPU 메모리 사용 |
| **프레임 버퍼** | 해상도 × 3 bytes | 프레임 스킵으로 최적화 |

### 6.3 정확도 vs 속도 Trade-off

```
정확도 우선:
- 모든 프레임 처리
- 큰 Detection Size
- 많은 Bank 임베딩
- 모든 필터링 활성화
→ 느린 속도, 높은 정확도

속도 우선:
- 프레임 스킵
- 작은 Detection Size
- Centroid만 사용
- 최소 필터링
→ 빠른 속도, 낮은 정확도

현재 설정 (균형):
- 2프레임마다 처리 (웹캠)
- Detection Size (640, 640)
- Bank 사용 (N개)
- 모든 필터링 활성화
→ 적절한 속도, 높은 정확도
```

---

## 7. 주요 기능 상세

### 7.1 인물 등록 기능

**목적**: 다양한 각도/조건의 얼굴을 Bank에 저장

**구현 방식:**
1. **기본 등록**: 이미지 폴더에서 자동 등록
2. **영상 수집**: 영상에서 자동으로 다양한 각도 수집
3. **수동 추가**: 특정 이미지들을 수동으로 추가

**각도 정보:**
- 각도 추정: ✅ 구현됨
- 각도별 저장: ⚠️ 부분 구현 (각도 정보는 출력용, Bank에는 저장 안됨)
- 각도별 필터링: ❌ 미구현

### 7.2 얼굴 인식 기능

**목적**: 입력 이미지/영상에서 등록된 인물 식별

**핵심 기능:**
1. **얼굴 감지**: RetinaFace로 얼굴 영역 검출
2. **임베딩 추출**: InsightFace로 512차원 벡터 생성
3. **매칭**: Bank/Centroid와 Cosine Similarity 비교
4. **오탐 방지**: 다층 필터링 시스템
5. **결과 저장**: CSV 로그, 스냅샷, 검토 대상 분리

### 7.3 오탐 방지 기능

**다층 방어 시스템:**

1. **sim_gap 체크**
   - 최고 유사도와 두 번째 유사도 차이 확인
   - 최소 5% 차이 필요

2. **bbox 기반 다중 매칭 필터링**
   - 같은 얼굴 영역에서 여러 인물 매칭 시 처리
   - IoU 및 중심점 거리로 판단

3. **프레임 간 연속성 체크**
   - 최근 5프레임 내 같은 인물 매칭 여부 확인
   - 일시적 오탐 제거

4. **화질 기반 임계값**
   - 화질에 따라 동적 임계값 조정
   - 고화질: 높은 임계값 (오탐 방지)
   - 저화질: 낮은 임계값 (인식률 유지)

5. **검토 대상 분리**
   - 의심스러운 매칭을 별도 폴더에 저장
   - 수동 검토 가능

---

## 8. 기술 스택 상세

### 8.1 핵심 라이브러리

| 라이브러리 | 용도 | 버전 | 선택 이유 |
|-----------|------|------|----------|
| **insightface** | 얼굴 인식 모델 | 0.7.3 | - SOTA 성능<br>- ONNX 지원<br>- Python 친화적 |
| **onnxruntime-gpu** | 모델 추론 | 1.18.0 | - GPU 가속<br>- 배포 최적화 |
| **opencv-python** | 이미지/영상 처리 | 4.12.0 | - 성능 우수<br>- 다양한 기능 |
| **numpy** | 배열 연산 | <2.0 | - 벡터 연산 효율<br>- 표준 라이브러리 |

### 8.2 기술 선택 Trade-off 요약

#### 8.2.1 모델 선택

**InsightFace buffalo_l vs 다른 모델**

| 모델 | 정확도 | 속도 | 모델 크기 | 선택 여부 |
|------|--------|------|----------|----------|
| **buffalo_l** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ✅ 선택 |
| ArcFace | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ❌ |
| FaceNet | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ❌ |

**선택 이유:**
- 최고 수준의 정확도
- 다양한 각도/조건에서 강건함
- ONNX 지원으로 배포 용이

#### 8.2.2 저장 방식

**Bank vs Centroid**

| 방식 | 정확도 | 속도 | 메모리 | 사용 시점 |
|------|--------|------|--------|----------|
| **Bank** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ | 기본 사용 |
| **Centroid** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | Bank 없을 때 |

**전략:**
- Bank 우선 사용 (높은 정확도)
- Centroid는 폴백 (호환성)

#### 8.2.3 처리 방식

**실시간 vs 배치**

| 방식 | 사용 케이스 | 최적화 |
|------|-----------|--------|
| **실시간** | 웹캠 | 프레임 스킵, GPU 활용 |
| **배치** | 영상 파일 | 모든 프레임 처리 |

---

## 9. 확장성 및 확장 계획

### 9.1 현재 구조의 확장성

**확장 가능한 부분:**
- ✅ Bank 크기: 제한 없음 (실제로는 N개)
- ✅ 인물 수: 제한 없음
- ✅ 입력 소스: 이미지, 영상, 웹캠 지원

**확장 제한:**
- ⚠️ 단일 프로세스: 멀티프로세싱 미지원
- ⚠️ 실시간 스트리밍: 웹캠만 지원 (네트워크 스트림 미지원)
- ⚠️ 분산 처리: 미지원

### 9.2 향후 확장 계획

**단기 (완료):**
- ✅ 웹캠 실시간 처리
- ✅ 타임스탬프 기반 결과 폴더
- ✅ 검토 대상 자동 분리

**중기 (계획 중):**
- 🔄 YOLOv9 기반 fast detector
- 🔄 Face anti-spoofing (딥페이크 방지)
- 🔄 Web dashboard (Flask/React)

**장기 (검토 중):**
- 📋 분산 처리 (멀티프로세싱)
- 📋 네트워크 스트리밍 지원
- 📋 클라우드 배포 (AWS/GCP)

---

## 10. 제약사항 및 리스크

### 10.1 기술적 제약사항

1. **하드웨어 의존성**
   - GPU 권장 (CPU도 가능하나 느림)
   - 메모리: 최소 4GB RAM 권장

2. **모델 한계**
   - 매우 작은 얼굴 감지 어려움
   - 극단적인 각도 (90도 이상) 인식 어려움
   - 가려진 얼굴 (마스크, 선글라스) 인식률 저하

3. **성능 제약**
   - 실시간 처리 시 프레임 스킵 필요
   - 대용량 영상 처리 시 시간 소요

### 10.2 리스크 및 대응 방안

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|----------|
| **오탐 발생** | 높음 | 다층 필터링 시스템, 검토 대상 분리 |
| **미탐 발생** | 높음 | 적응형 임계값, Bank 방식 사용 |
| **성능 저하** | 중간 | 프레임 스킵, GPU 활용 |
| **메모리 부족** | 낮음 | Bank 크기 제한, Centroid 사용 |

---

## 11. 성공 지표 (KPI)

### 11.1 정확도 지표

- **정확도 (Accuracy)**: 매칭 정확도 > 95%
- **오탐률 (False Positive Rate)**: < 5%
- **미탐률 (False Negative Rate)**: < 10%

### 11.2 성능 지표

- **처리 속도**: 
  - 이미지: < 1초
  - 영상: > 10 FPS (GPU)
  - 웹캠: > 15 FPS (실시간)

### 11.3 사용성 지표

- **등록 시간**: 인물당 < 1분
- **결과 확인**: 즉시 확인 가능 (CSV, 이미지)
- **검토 효율**: 검토 대상 자동 분리로 수동 검토 시간 50% 감소

---

## 12. 프로젝트 일정 (초기 기획 기준)

### Phase 1: 기본 기능 구현 ✅ (완료)
- 얼굴 감지 및 임베딩 추출
- 기본 매칭 알고리즘
- Bank/Centroid 저장

### Phase 2: 고급 기능 추가 ✅ (완료)
- 마스크 감지 및 적응형 임계값
- 화질 기반 임계값 조정
- 오탐 방지 필터링
- 검토 대상 분리

### Phase 3: 실시간 처리 ✅ (완료)
- 웹캠 실시간 처리
- GUI 표시
- 성능 최적화

### Phase 4: 확장 기능 (계획 중)
- Web dashboard
- Face anti-spoofing
- 분산 처리

---

## 13. 결론

FaceWatch는 InsightFace 기반의 고성능 얼굴 인식 시스템으로, 다양한 환경(CCTV, 영상, 이미지, 웹캠)에서 특정 인물을 식별하고 추적할 수 있습니다.

**핵심 강점:**
- 높은 정확도 (다층 필터링 시스템)
- 다양한 환경 지원
- 확장 가능한 구조
- 사용자 친화적 인터페이스

**주요 Trade-off:**
- 정확도 vs 속도: 적응형 임계값과 프레임 스킵으로 균형
- 메모리 vs 정확도: Bank 방식으로 정확도 우선, 필요시 Centroid 사용
- 복잡도 vs 정확도: 다층 필터링으로 정확도 향상, 복잡도 증가는 감수

이 기획안은 프로젝트의 초기 설계 의도와 기술적 선택의 근거를 문서화한 것으로, 향후 개발 및 개선의 기준이 됩니다.

