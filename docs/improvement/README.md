# FaceWatch 시스템 개선 문서

> 오인식 확산 및 임베딩 오염 문제 해결을 위한 개선 문서 모음

---

## 문서 구조

```
docs/improvement/
├── README.md                      # 이 파일 (개요 및 문서 구조)
├── ISSUES_AND_IMPROVEMENTS.md     # 핵심 문제점 분석 및 전체 개선 계획
└── STEP1_IMPLEMENTATION.md        # 1단계 개선 구현 상세
```

---

## 문서 설명

### 1. ISSUES_AND_IMPROVEMENTS.md

**핵심 문제점 분석 및 전체 개선 계획**

이 문서는 다음을 포함합니다:
- 3가지 핵심 문제점 상세 분석
- 각 단계별 개선 방안
- 완료된 작업 (1단계)
- 예정된 작업 (2단계, 3단계)
- 개선 효과 및 예상 결과

**대상 독자**: 프로젝트 관리자, 시스템 아키텍트, 개발자

---

### 2. STEP1_IMPLEMENTATION.md

**1단계 개선 구현 상세**

이 문서는 다음을 포함합니다:
- 랜드마크 기반 Occlusion 검증 함수 구현
- Dynamic Bank 추가 로직 수정
- 코드 변경 사항 상세
- 테스트 방법
- 개선 효과

**대상 독자**: 개발자, 코드 리뷰어

---

## 개선 단계 요약

### ✅ 1단계: Dynamic Bank 입력 필터 강화 (완료)

**목표**: "쓰레기가 들어오면 쓰레기가 나간다" 문제 해결

**구현 내용**:
- Base Bank와의 최소 유사도 검증 (>= 0.6)
- 고화질 검증 강화 (얼굴 크기 >= 200px)
- Occlusion 검증 (랜드마크 기반)

**상태**: ✅ 완료

---

### 🔄 2단계: 가중치 기반 매칭 로직 변경 (예정)

**목표**: "승자 독식" 방식 개선

**구현 내용**:
- 가중치 기반 매칭 (Weighted Voting)
- Base 점수 기준 보정 로직

**상태**: 🔄 예정 (1단계 테스트 완료 후)

---

### 🔄 3단계: 오염된 Bank 정화 스크립트 (예정)

**목표**: 이미 오염된 현재의 Dynamic Bank 데이터 정리

**구현 내용**:
- 전수 검사 스크립트 실행
- Base Bank와 역검증하여 오염 데이터 삭제
- 각도별 최대 개수 제한 로직 추가

**상태**: 🔄 예정 (2단계 완료 후)

---

## 관련 문서

- **시스템 로직 문서**: `../../SYSTEM_LOGIC.md` (7.5절, 7.6절)
- **관련 코드**:
  - `../../backend/main.py:1657-1710` (Dynamic Bank 추가 로직)
  - `../../backend/main.py:1273-1285` (Bank 매칭 로직)
  - `../../src/utils/face_angle_detector.py` (Occlusion 검증 함수)

---

## 업데이트 이력

- **2024년**: 1단계 개선 완료
  - 랜드마크 기반 Occlusion 검증 함수 추가
  - Dynamic Bank 입력 필터 강화

---

**작성일**: 2024년  
**버전**: 1.0  
**작성자**: FaceWatch 개발팀













